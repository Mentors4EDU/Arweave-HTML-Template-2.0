<html>
<h1 id="welcome-to-the-ultimate-site-demo">Welcome to the Ultimate Site Demo!</h1>
<h3 id="we-are-creating-a-website-deployed-via-arweave">We are creating a website deployed via Arweave?</h3>
<p><a href="https://docs.arweave.org/developers/hackathon"><img src="https://blobscdn.gitbook.com/v0/b/gitbook-28427.appspot.com/o/spaces%2F-LQoiZsTrKaWGG_SWJb5%2Favatar.png?generation=1541704144048952&amp;alt=media" alt="N|Solid" /></a></p>
<p>Is that too hard to comprehend?</p>
<h3 id="did-you-know-arweave-is-mineable">Did you know Arweave is mineable?</h3>
<pre><code>git clone https://github.com/ArweaveTeam/arweave.git arweave &amp;&amp; \
cd arweave &amp;&amp; git -c advice.detachedHead=false checkout stable
curl https://raw.githubusercontent.com/ArweaveTeam/arweave/stable/install.sh | bash
./arweave-server mine mining_addr YOUR-MINING-ADDRESS peer 188.166.200.45 peer 188.166.192.169 peer 163.47.11.64 peer 159.203.158.108 peer 159.203.49.13 peer 139.59.51.59 peer 138.197.232.192
</code></pre>
<h3 id="what-we-did-for-deployment">What we did for deployment:</h3>
<pre><code>arweave deploy path-to/index.html --package
</code></pre>
<h2 id="can-arweave-help-power-to-future-of-smart-cities-maybe-">Can Arweave help power to future of smart cities? Maybe ...</h2>
<h4 id="did-you-know-arweave-even-has-its-own-email-app-written-in-html">Did you know Arweave even has it's own email app written in HTML?</h4>
	<head>
		<title>Weavemail</title>
		<script>!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,function(t){return e[t]}.bind(null,i));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=12)}([function(e,t,r){"use strict";function n(e){return"[object Array]"===c.call(e)}function i(e){return null!==e&&"object"==typeof e}function o(e){return"[object Function]"===c.call(e)}function s(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),n(e))for(var r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var a=r(5),u=r(18),c=Object.prototype.toString;e.exports={isArray:n,isArrayBuffer:function(e){return"[object ArrayBuffer]"===c.call(e)},isBuffer:u,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:i,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===c.call(e)},isFile:function(e){return"[object File]"===c.call(e)},isBlob:function(e){return"[object Blob]"===c.call(e)},isFunction:o,isStream:function(e){return i(e)&&o(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:s,merge:function e(){function t(t,n){r[n]="object"==typeof r[n]&&"object"==typeof t?e(r[n],t):t}for(var r={},n=0,i=arguments.length;n<i;n++)s(arguments[n],t);return r},extend:function(e,t,r){return s(t,function(t,n){e[n]=r&&"function"==typeof t?a(t,r):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,r){"use strict";function n(e){if("undefined"==typeof TextEncoder){return(new(0,r(3).TextEncoder)).encode(e)}return(new TextEncoder).encode(e)}function i(e){return new Uint8Array(c.toByteArray(u(e)))}function o(e){return c.fromByteArray(new Uint8Array(e))}function s(e){return a(o(e))}function a(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}function u(e){let t;return t=0==(e=e.replace(/\-/g,"+").replace(/\_/g,"/")).length%4?0:4-e.length%4,e.concat("=".repeat(t))}Object.defineProperty(t,"__esModule",{value:!0});const c=r(38);t.concatBuffers=function(e){let t=0;for(let r=0;r<e.length;r++)t+=e[r].byteLength;let r=new Uint8Array(t),n=0;r.set(new Uint8Array(e[0]),n),n+=e[0].byteLength;for(let t=1;t<e.length;t++)r.set(new Uint8Array(e[t]),n),n+=e[t].byteLength;return r},t.b64UrlToString=function(e){let t=i(e);if("undefined"==typeof TextDecoder){return new(0,r(3).TextDecoder)("utf-8",{fatal:!0}).decode(t)}return new TextDecoder("utf-8",{fatal:!0}).decode(t)},t.bufferToString=function(e){if("undefined"==typeof TextDecoder){return new(0,r(3).TextDecoder)("utf-8",{fatal:!0}).decode(e)}return new TextDecoder("utf-8",{fatal:!0}).decode(e)},t.stringToBuffer=n,t.stringToB64Url=function(e){return s(n(e))},t.b64UrlToBuffer=i,t.bufferTob64=o,t.bufferTob64Url=s,t.b64UrlEncode=a,t.b64UrlDecode=u},function(e,t,r){"use strict";(function(t){function n(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i,o=r(0),s=r(20),a={"Content-Type":"application/x-www-form-urlencoded"},u={adapter:("undefined"==typeof XMLHttpRequest?void 0!==t&&(i=r(7)):i=r(7),i),transformRequest:[function(e,t){return s(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(n(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(n(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return 200<=e&&300>e}};u.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],function(e){u.headers[e]={}}),o.forEach(["post","put","patch"],function(e){u.headers[e]=o.merge(a)}),e.exports=u}).call(this,r(6))},function(e,t,r){(function(e,n){function i(e,r){var n={seen:[],stylize:s};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),l(r)?n.showHidden=r:r&&t._extend(n,r),g(n.showHidden)&&(n.showHidden=!1),g(n.depth)&&(n.depth=2),g(n.colors)&&(n.colors=!1),g(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),a(n,e,n.depth)}function o(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function s(e){return e}function a(e,r,n){if(e.customInspect&&r&&b(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return d(i)||(i=a(e,i,n)),i}var o=function(e,t){if(g(t))return e.stylize("undefined","undefined");if(d(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return h(t)?e.stylize(""+t,"number"):l(t)?e.stylize(""+t,"boolean"):p(t)?e.stylize("null","null"):void 0}(e,r);if(o)return o;var s=Object.keys(r),w=function(e){var t={};return e.forEach(function(e){t[e]=!0}),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),v(r)&&(0<=s.indexOf("message")||0<=s.indexOf("description")))return u(r);if(0===s.length){if(b(r)){var T=r.name?": "+r.name:"";return e.stylize("[Function"+T+"]","special")}if(y(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(m(r))return e.stylize(Date.prototype.toString.call(r),"date");if(v(r))return u(r)}var A,x="",S=!1,O=["{","}"];(f(r)&&(S=!0,O=["[","]"]),b(r))&&(x=" [Function"+(r.name?": "+r.name:"")+"]");return y(r)&&(x=" "+RegExp.prototype.toString.call(r)),m(r)&&(x=" "+Date.prototype.toUTCString.call(r)),v(r)&&(x=" "+u(r)),0!==s.length||S&&0!=r.length?0>n?y(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),A=S?function(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)E(t,s+"")?o.push(c(e,t,r,n,s+"",!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(c(e,t,r,n,i,!0))}),o}(e,r,n,w,s):s.map(function(t){return c(e,r,n,w,t,S)}),e.seen.pop(),function(e,t,r){return 60<e.reduce(function(e,t){return 0,0<=t.indexOf("\n")&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(A,x,O)):O[0]+x+O[1]}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function c(e,t,r,n,i,o){var s,u,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),E(n,i)||(s="["+i+"]"),u||(0>e.seen.indexOf(c.value)?-1<(u=p(r)?a(e,c.value,null):a(e,c.value,r-1)).indexOf("\n")&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),g(s)){if(o&&i.match(/^\d+$/))return u;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function f(e){return Array.isArray(e)}function l(e){return"boolean"==typeof e}function p(e){return null===e}function h(e){return"number"==typeof e}function d(e){return"string"==typeof e}function g(e){return void 0===e}function y(e){return w(e)&&"[object RegExp]"===T(e)}function w(e){return"object"==typeof e&&null!==e}function m(e){return w(e)&&"[object Date]"===T(e)}function v(e){return w(e)&&("[object Error]"===T(e)||e instanceof Error)}function b(e){return"function"==typeof e}function T(e){return Object.prototype.toString.call(e)}function A(e){return 10>e?"0"+e.toString(10):e.toString(10)}function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var x=/%[sdj%]/g;t.format=function(e){if(!d(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,o=n.length,s=(e+"").replace(x,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return n[r++]+"";case"%d":return+n[r++];case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),a=n[r];r<o;a=n[++r])s+=p(a)||!w(a)?" "+a:" "+i(a);return s},t.deprecate=function(r,i){if(g(e.process))return function(){return t.deprecate(r,i).apply(this,arguments)};if(!0===n.noDeprecation)return r;var o=!1;return function(){if(!o){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),o=!0}return r.apply(this,arguments)}};var S,O={};t.debuglog=function(e){if(g(S)&&(S=n.env.NODE_DEBUG||""),e=e.toUpperCase(),!O[e])if(new RegExp("\\b"+e+"\\b","i").test(S)){var r=n.pid;O[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else O[e]=function(){};return O[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=f,t.isBoolean=l,t.isNull=p,t.isNullOrUndefined=function(e){return null==e},t.isNumber=h,t.isString=d,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=g,t.isRegExp=y,t.isObject=w,t.isDate=m,t.isError=v,t.isFunction=b,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(40);var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){var e,r;console.log("%s - %s",(e=new Date,r=[A(e.getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":"),[e.getDate(),N[e.getMonth()],r].join(" ")),t.format.apply(t,arguments))},t.inherits=r(41),t._extend=function(e,t){if(!t||!w(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,r(39),r(6))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(13),i=r(15),o=r(35),s=r(36),a=r(42),u=r(11),c=r(1),f=r(43);t.default=class{constructor(e){this.crypto=e.crypto,this.api=new i.default(e.api),this.wallets=new a.default(this.api,e.crypto),this.transactions=new s.default(this.api,e.crypto),this.silo=new f.default(this.api,this.crypto,this.transactions),this.network=new o.default(this.api),this.ar=new n.default,this.utils=c}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(e,t){const r=await this.wallets.jwkToAddress(t),n={};if(Object.assign(n,e),!(e.data||e.target&&e.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(null==e.owner&&(n.owner=t.n),null==e.last_tx&&(n.last_tx=await this.wallets.getLastTransactionID(r)),null==e.reward){const t=(e=>{if(null==e)return 0;if("string"==typeof e)return e.length;if(e instanceof Uint8Array)return e.byteLength;throw new Error("Expected data to be a string or Uint8Array")})(e.data);n.reward=await this.transactions.getPrice(t,n.target)}return e.data&&("string"==typeof e.data&&(n.data=c.stringToB64Url(e.data)),e.data instanceof Uint8Array&&(n.data=c.bufferTob64Url(e.data))),new u.default(n)}async createSiloTransaction(e,t,r){const n=await this.wallets.jwkToAddress(t),i={};if(Object.assign(i,e),!e.data)throw new Error("Silo transactions must have a 'data' value");if(!r)throw new Error("No Silo URI specified.");if(e.target||e.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");null==e.owner&&(i.owner=t.n),null==e.last_tx&&(i.last_tx=await this.wallets.getLastTransactionID(n));const o=await this.silo.parseUri(r);if("string"==typeof e.data){const t=await this.crypto.encrypt(c.stringToBuffer(e.data),o.getEncryptionKey());i.reward=await this.transactions.getPrice(t.byteLength),i.data=c.bufferTob64Url(t)}if(e.data instanceof Uint8Array){const t=await this.crypto.encrypt(e.data,o.getEncryptionKey());i.reward=await this.transactions.getPrice(t.byteLength),i.data=c.bufferTob64Url(t)}const s=new u.default(i);return s.addTag("Silo-Name",o.getAccessKey()),s.addTag("Silo-Version","0.1.0"),s}}},function(e){"use strict";e.exports=function(e,t){return function(){for(var r=Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e){function t(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function n(e){if(u===setTimeout)return setTimeout(e,0);if((u===t||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function i(){h&&l&&(h=!1,l.length?p=l.concat(p):d=-1,p.length&&o())}function o(){if(!h){var e=n(i);h=!0;for(var t=p.length;t;){for(l=p,p=[];++d<t;)l&&l[d].run();d=-1,t=p.length}l=null,h=!1,function(e){if(c===clearTimeout)return clearTimeout(e);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function a(){}var u,c,f=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:t}catch(e){u=t}try{c="function"==typeof clearTimeout?clearTimeout:r}catch(e){c=r}}();var l,p=[],h=!1,d=-1;f.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];p.push(new s(e,t)),1!==p.length||h||n(o)},s.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=a,f.addListener=a,f.once=a,f.off=a,f.removeListener=a,f.removeAllListeners=a,f.emit=a,f.prependListener=a,f.prependOnceListener=a,f.listeners=function(){return[]},f.binding=function(){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,r){"use strict";var n=r(0),i=r(21),o=r(23),s=r(24),a=r(25),u=r(8),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||r(26);e.exports=function(e){return new Promise(function(t,f){var l=e.data,p=e.headers;n.isFormData(l)&&delete p["Content-Type"];var h=new XMLHttpRequest,d="onreadystatechange",g=!1;if("undefined"!=typeof window&&window.XDomainRequest&&!("withCredentials"in h)&&!a(e.url)&&(h=new window.XDomainRequest,d="onload",g=!0,h.onprogress=function(){},h.ontimeout=function(){}),e.auth){var y=e.auth.username||"",w=e.auth.password||"";p.Authorization="Basic "+c(y+":"+w)}if(h.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h[d]=function(){if(h&&(4===h.readyState||g)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in h?s(h.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:r,config:e,request:h};i(t,f,n),h=null}},h.onerror=function(){f(u("Network Error",e,null,h)),h=null},h.ontimeout=function(){f(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",h)),h=null},n.isStandardBrowserEnv()){var m=r(27),v=(e.withCredentials||a(e.url))&&e.xsrfCookieName?m.read(e.xsrfCookieName):void 0;v&&(p[e.xsrfHeaderName]=v)}if("setRequestHeader"in h&&n.forEach(p,function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete p[t]:h.setRequestHeader(t,e)}),e.withCredentials&&(h.withCredentials=!0),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){h&&(h.abort(),f(e),h=null)}),void 0===l&&(l=null),h.send(l)})}},function(e,t,r){"use strict";var n=r(22);e.exports=function(e,t,r,i,o){var s=new Error(e);return n(s,t,r,i,o)}},function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1);class i{get(e,t){if(!Object.getOwnPropertyNames(this).includes(e))throw new Error(`Field "${e}" is not a property of the Arweave Transaction class.`);return t&&1==t.decode?t&&t.string?n.b64UrlToString(this[e]):n.b64UrlToBuffer(this[e]):this[e]}}class o extends i{constructor(e,t,r=!1){super(),this.name=e,this.value=t}}t.Tag=o,t.default=class extends i{constructor(e={}){super(),this.id="",this.last_tx="",this.owner="",this.tags=[],this.target="",this.quantity="0",this.data="",this.reward="0",this.signature="",Object.assign(this,e),e.tags&&(this.tags=e.tags.map(e=>new o(e.name,e.value)))}addTag(e,t){this.tags.push(new o(n.stringToB64Url(e),n.stringToB64Url(t)))}toJSON(){return{id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:this.data,reward:this.reward,signature:this.signature}}setSignature({signature:e,id:t}){this.signature=e,this.id=t}getSignatureData(){let e=this.tags.reduce((e,t)=>e+t.get("name",{decode:!0,string:!0})+t.get("value",{decode:!0,string:!0}),"");return n.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),n.stringToBuffer(this.quantity),n.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),n.stringToBuffer(e)])}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4),i=r(44);n.default.init=function(e={}){return new n.default({api:e,crypto:new i.default})},window.Arweave=n.default,function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(4)),t.default=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(14);t.default=class{constructor(){this.BigNum=((e,t)=>{return new(n.BigNumber.clone({DECIMAL_PLACES:t}))(e)})}winstonToAr(e,{formatted:t=!1,decimals:r=12,trim:n=!0}={}){let i=this.stringToBigNum(e,r).shiftedBy(-12);return t?i.toFormat(r):i.toFixed(r)}arToWinston(e,{formatted:t=!1}={}){let r=this.stringToBigNum(e).shiftedBy(12);return t?r.toFormat():r.toFixed(0)}compare(e,t){let r=this.stringToBigNum(e),n=this.stringToBigNum(t);return r.comparedTo(n)}isEqual(e,t){return 0===this.compare(e,t)}isLessThan(e,t){let r=this.stringToBigNum(e),n=this.stringToBigNum(t);return r.isLessThan(n)}isGreaterThan(e,t){let r=this.stringToBigNum(e),n=this.stringToBigNum(t);return r.isGreaterThan(n)}add(e,t){let r=this.stringToBigNum(e);this.stringToBigNum(t);return r.plus(t).toFixed(0)}sub(e,t){let r=this.stringToBigNum(e);this.stringToBigNum(t);return r.minus(t).toFixed(0)}stringToBigNum(e,t=12){return this.BigNum(e,t)}}},function(e,t,r){var n;!function(){"use strict";function i(e){var t=0|e;return 0<e||e===t?t:t-1}function o(e){for(var t,r,n=1,i=e.length,o=e[0]+"";n<i;){for(t=e[n++]+"",r=m-t.length;r--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function s(e,t){var r,n,i=e.c,o=t.c,s=e.s,a=t.s,u=e.e,c=t.e;if(!s||!a)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=0>s,n=u==c,!i||!o)return n?0:!i^r?1:-1;if(!n)return u>c^r?1:-1;for(a=(u=i.length)<(c=o.length)?u:c,s=0;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return u==c?0:u>c^r?1:-1}function a(e,t,r,n){if(e<t||e>r||e!==(0>e?h(e):d(e)))throw Error(g+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+e)}function u(e){var t=e.c.length-1;return i(e.e/m)==t&&0!=e.c[t]%2}function c(e,t){return(1<e.length?e.charAt(0)+"."+e.slice(1):e)+(0>t?"e":"e+")+t}function f(e,t,r){var n,i;if(0>t){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}var l,p=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,h=Math.ceil,d=Math.floor,g="[BigNumber Error] ",y=g+"Number primitive has more than 15 significant digits: ",w=1e14,m=14,v=9007199254740991,b=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],T=1e7,A=1e9;(l=function e(t){function r(e,t){var n,i,o,s,u,c,f,l,h=this;if(!(h instanceof r))return new r(e,t);if(null==t){if(e instanceof r)return h.s=e.s,h.e=e.e,void(h.c=(e=e.c)?e.slice():e);if((c="number"==typeof e)&&0==0*e){if(h.s=0>1/e?(e=-e,-1):1,e===~~e){for(s=0,u=e;10<=u;u/=10,s++);return h.e=s,void(h.c=[e])}l=e+""}else{if(l=e+"",!p.test(l))return B(h,l,c);h.s=45==l.charCodeAt(0)?(l=l.slice(1),-1):1}-1<(s=l.indexOf("."))&&(l=l.replace(".","")),0<(u=l.search(/e/i))?(0>s&&(s=u),s+=+l.slice(u+1),l=l.substring(0,u)):0>s&&(s=l.length)}else{if(a(t,2,V.length,"Base"),l=e+"",10==t)return x(h=new r(e instanceof r?e:l),I+h.e+1,q);if(c="number"==typeof e){if(0!=0*e)return B(h,l,c,t);if(h.s=0>1/e?(l=l.slice(1),-1):1,r.DEBUG&&15<l.replace(/^0\.0*|\./,"").length)throw Error(y+e);c=!1}else h.s=45===l.charCodeAt(0)?(l=l.slice(1),-1):1;for(n=V.slice(0,t),s=u=0,f=l.length;u<f;u++)if(0>n.indexOf(i=l.charAt(u))){if("."==i){if(u>s){s=f;continue}}else if(!o&&(l==l.toUpperCase()&&(l=l.toLowerCase())||l==l.toLowerCase()&&(l=l.toUpperCase()))){o=!0,u=-1,s=0;continue}return B(h,e+"",c,t)}-1<(s=(l=N(l,t,10,h.s)).indexOf("."))?l=l.replace(".",""):s=l.length}for(u=0;48===l.charCodeAt(u);u++);for(f=l.length;48===l.charCodeAt(--f););if(l=l.slice(u,++f)){if(f-=u,c&&r.DEBUG&&15<f&&(e>v||e!==d(e)))throw Error(y+h.s*e);if((s=s-u-1)>K)h.c=h.e=null;else if(s<F)h.c=[h.e=0];else{if(h.e=s,h.c=[],u=(s+1)%m,0>s&&(u+=m),u<f){for(u&&h.c.push(+l.slice(0,u)),f-=m;u<f;)h.c.push(+l.slice(u,u+=m));l=l.slice(u),u=m-l.length}else u-=f;for(;u--;l+="0");h.c.push(+l)}}else h.c=[h.e=0]}function n(e,t,n,i){var s,u,l,p,h;if(null==n?n=q:a(n,0,8),!e.c)return e.toString();if(s=e.c[0],l=e.e,null==t)h=o(e.c),h=1==i||2==i&&(l<=M||l>=k)?c(h,l):f(h,l,"0");else if(u=(e=x(new r(e),t,n)).e,p=(h=o(e.c)).length,1==i||2==i&&(t<=u||u<=M)){for(;p<t;h+="0",p++);h=c(h,u)}else if(t-=l,h=f(h,u,"0"),u+1>p){if(0<--t)for(h+=".";t--;h+="0");}else if(0<(t+=u-p))for(u+1==p&&(h+=".");t--;h+="0");return 0>e.s&&s?"-"+h:h}function l(e,t){for(var n,i=1,o=new r(e[0]);i<e.length;i++){if(!(n=new r(e[i])).s){o=n;break}t.call(o,n)&&(o=n)}return o}function E(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];10<=i;i/=10,n++);return(r=n+r*m-1)>K?e.c=e.e=null:r<F?e.c=[e.e=0]:(e.e=r,e.c=t),e}function x(e,t,r,n){var i,o,s,a,u,c,f,l=e.c,p=b;if(l){e:{for(i=1,a=l[0];10<=a;a/=10,i++);if(0>(o=t-i))o+=m,s=t,f=0|(u=l[c=0])/p[i-s-1]%10;else if((c=h((o+1)/m))>=l.length){if(!n)break e;for(;l.length<=c;l.push(0));u=f=0,i=1,s=(o%=m)-m+1}else{for(u=a=l[c],i=1;10<=a;a/=10,i++);f=0>(s=(o%=m)-m+i)?0:0|u/p[i-s-1]%10}if(n=n||0>t||null!=l[c+1]||(0>s?u:u%p[i-s-1]),n=4>r?(f||n)&&(0==r||r==(0>e.s?3:2)):5<f||5==f&&(4==r||n||6==r&&1&(0<o?0<s?u/p[i-s]:0:l[c-1])%10||r==(0>e.s?8:7)),1>t||!l[0])return l.length=0,n?(t-=e.e+1,l[0]=p[(m-t%m)%m],e.e=-t||0):l[0]=e.e=0,e;if(0==o?(l.length=c,a=1,c--):(l.length=c+1,a=p[m-o],l[c]=0<s?d(u/p[i-s]%p[s])*a:0),n)for(;;){if(0==c){for(o=1,s=l[0];10<=s;s/=10,o++);for(s=l[0]+=a,a=1;10<=s;s/=10,a++);o!=a&&(e.e++,l[0]==w&&(l[0]=1));break}if(l[c]+=a,l[c]!=w)break;l[c--]=0,a=1}for(o=l.length;0===l[--o];l.pop());}e.e>K?e.c=e.e=null:e.e<F&&(e.c=[e.e=0])}return e}function S(e){var t,r=e.e;return null===r?e.toString():(t=o(e.c),t=r<=M||r>=k?c(t,r):f(t,r,"0"),0>e.s?"-"+t:t)}var O,N,B,U,j,C,_,R,P,D=r.prototype={constructor:r,toString:null,valueOf:null},L=new r(1),I=20,q=4,M=-7,k=21,F=-1e7,K=1e7,z=!1,$=1,H=0,G={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Ã‚ ",suffix:""},V="0123456789abcdefghijklmnopqrstuvwxyz";return r.clone=e,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(g+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(a(r=e[t],0,A,t),I=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(a(r=e[t],0,8,t),q=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(a(r[0],-A,0,t),a(r[1],0,A,t),M=r[0],k=r[1]):(a(r,-A,A,t),M=-(k=0>r?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)a(r[0],-A,-1,t),a(r[1],1,A,t),F=r[0],K=r[1];else{if(a(r,-A,A,t),!r)throw Error(g+t+" cannot be zero: "+r);F=-(K=0>r?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(g+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw z=!r,Error(g+"crypto unavailable");z=r}else z=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(a(r=e[t],0,9,t),$=r),e.hasOwnProperty(t="POW_PRECISION")&&(a(r=e[t],0,A,t),H=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(g+t+" not an object: "+r);G=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.$|[+-.\s]|(.).*\1/.test(r))throw Error(g+t+" invalid: "+r);V=r}}return{DECIMAL_PLACES:I,ROUNDING_MODE:q,EXPONENTIAL_AT:[M,k],RANGE:[F,K],CRYPTO:z,MODULO_MODE:$,POW_PRECISION:H,FORMAT:G,ALPHABET:V}},r.isBigNumber=function(e){return e instanceof r||e&&!0===e._isBigNumber||!1},r.maximum=r.max=function(){return l(arguments,D.lt)},r.minimum=r.min=function(){return l(arguments,D.gt)},r.random=(P=2097151&9007199254740992*Math.random()?function(){return d(9007199254740992*Math.random())}:function(){return 8388608*(0|1073741824*Math.random())+(0|8388608*Math.random())},function(e){var t,n,i,o,s,u=0,c=[],f=new r(L);if(null==e?e=I:a(e,0,A),o=h(e/m),z)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));u<o;)9e15<=(s=131072*t[u]+(t[u+1]>>>11))?(n=crypto.getRandomValues(new Uint32Array(2)),t[u]=n[0],t[u+1]=n[1]):(c.push(s%1e14),u+=2);u=o/2}else{if(!crypto.randomBytes)throw z=!1,Error(g+"crypto unavailable");for(t=crypto.randomBytes(o*=7);u<o;)9e15<=(s=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])?crypto.randomBytes(7).copy(t,u):(c.push(s%1e14),u+=7);u=o/7}if(!z)for(;u<o;)9e15>(s=P())&&(c[u++]=s%1e14);for(o=c[--u],e%=m,o&&e&&(s=b[m-e],c[u]=d(o/s)*s);0===c[u];c.pop(),u--);if(0>u)c=[i=0];else{for(i=-1;0===c[0];c.splice(0,1),i-=m);for(u=1,s=c[0];10<=s;s/=10,u++);u<m&&(i-=m-u)}return f.e=i,f.c=c,f}),r.sum=function(){for(var e=1,t=arguments,n=new r(t[0]);e<t.length;)n=n.plus(t[e++]);return n},N=function(){function e(e,t,r,n){for(var i,o,s=[0],a=0,u=e.length;a<u;){for(o=s.length;o--;s[o]*=t);for(s[0]+=n.indexOf(e.charAt(a++)),i=0;i<s.length;i++)s[i]>r-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=0|s[i]/r,s[i]%=r)}return s.reverse()}return function(t,n,i,s,a){var u,c,l,p,h,d,g,y,w=t.indexOf("."),m=I,v=q;for(0<=w&&(p=H,H=0,t=t.replace(".",""),d=(y=new r(n)).pow(t.length-w),H=p,y.c=e(f(o(d.c),d.e,"0"),10,i,"0123456789"),y.e=y.c.length),l=p=(g=e(t,n,i,a?(u=V,"0123456789"):(u="0123456789",V))).length;0==g[--p];g.pop());if(!g[0])return u.charAt(0);if(0>w?--l:(d.c=g,d.e=l,d.s=s,g=(d=O(d,y,m,v,i)).c,h=d.r,l=d.e),w=g[c=l+m+1],p=i/2,h=h||0>c||null!=g[c+1],h=4>v?(null!=w||h)&&(0==v||v==(0>d.s?3:2)):w>p||w==p&&(4==v||h||6==v&&1&g[c-1]||v==(0>d.s?8:7)),1>c||!g[0])t=h?f(u.charAt(1),-m,u.charAt(0)):u.charAt(0);else{if(g.length=c,h)for(--i;++g[--c]>i;)g[c]=0,c||(++l,g=[1].concat(g));for(p=g.length;!g[--p];);for(w=0,t="";w<=p;t+=u.charAt(g[w++]));t=f(t,l,u.charAt(0))}return t}}(),O=function(){function e(e,t,r){var n,i,o,s,a=0,u=e.length,c=t%T,f=0|t/T;for(e=e.slice();u--;)a=(0|(i=c*(o=e[u]%T)+(n=f*o+(s=0|e[u]/T)*c)%T*T+a)/r)+(0|n/T)+f*s,e[u]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&1<e.length;e.splice(0,1));}return function(o,s,a,u,c){var f,l,p,h,g,y,v,b,T,A,E,S,O,N,B,U,j,C=o.s==s.s?1:-1,_=o.c,R=s.c;if(!(_&&_[0]&&R&&R[0]))return new r(o.s&&s.s&&(_?!R||_[0]!=R[0]:R)?_&&0==_[0]||!R?0*C:C/0:NaN);for(T=(b=new r(C)).c=[],C=a+(l=o.e-s.e)+1,c||(c=w,l=i(o.e/m)-i(s.e/m),C=0|C/m),p=0;R[p]==(_[p]||0);p++);if(R[p]>(_[p]||0)&&l--,0>C)T.push(1),h=!0;else{for(N=_.length,U=R.length,p=0,C+=2,1<(g=d(c/(R[0]+1)))&&(R=e(R,g,c),_=e(_,g,c),U=R.length,N=_.length),O=U,E=(A=_.slice(0,U)).length;E<U;A[E++]=0);j=R.slice(),j=[0].concat(j),B=R[0],R[1]>=c/2&&B++;do{if(g=0,0>(f=t(R,A,U,E))){if(S=A[0],U!=E&&(S=S*c+(A[1]||0)),1<(g=d(S/B)))for(g>=c&&(g=c-1),v=(y=e(R,g,c)).length,E=A.length;1==t(y,A,v,E);)g--,n(y,U<v?j:R,v,c),v=y.length,f=1;else 0==g&&(f=g=1),v=(y=R.slice()).length;if(v<E&&(y=[0].concat(y)),n(A,y,E,c),E=A.length,-1==f)for(;1>t(R,A,U,E);)g++,n(A,U<E?j:R,E,c),E=A.length}else 0===f&&(g++,A=[0]);T[p++]=g,A[0]?A[E++]=_[O]||0:(A=[_[O]],E=1)}while((O++<N||null!=A[0])&&C--);h=null!=A[0],T[0]||T.splice(0,1)}if(c==w){for(p=1,C=T[0];10<=C;C/=10,p++);x(b,a+(b.e=p+l*m-1)+1,u,h)}else b.e=l,b.r=+h;return b}}(),U=/^(-?)0([xbo])(?=\w[\w.]*$)/i,j=/^([^.]+)\.$/,C=/^\.([^.]+)$/,_=/^-?(Infinity|NaN)$/,R=/^\s*\+(?=[\w.])|^\s+|\s+$/g,B=function(e,t,n,i){var o,s=n?t:t.replace(R,"");if(_.test(s))e.s=isNaN(s)?null:0>s?-1:1,e.c=e.e=null;else{if(!n&&(s=s.replace(U,function(e,t,r){return o="x"==(r=r.toLowerCase())?16:"b"==r?2:8,i&&i!=o?e:t}),i&&(o=i,s=s.replace(j,"$1").replace(C,"0.$1")),t!=s))return new r(s,o);if(r.DEBUG)throw Error(g+"Not a"+(i?" base "+i:"")+" number: "+t);e.c=e.e=e.s=null}},D.absoluteValue=D.abs=function(){var e=new r(this);return 0>e.s&&(e.s=1),e},D.comparedTo=function(e,t){return s(this,new r(e,t))},D.decimalPlaces=D.dp=function(e,t){var n,o,s,u=this;if(null!=e)return a(e,0,A),null==t?t=q:a(t,0,8),x(new r(u),e+u.e+1,t);if(!(n=u.c))return null;if(o=((s=n.length-1)-i(this.e/m))*m,s=n[s])for(;0==s%10;s/=10,o--);return 0>o&&(o=0),o},D.dividedBy=D.div=function(e,t){return O(this,new r(e,t),I,q)},D.dividedToIntegerBy=D.idiv=function(e,t){return O(this,new r(e,t),0,1)},D.exponentiatedBy=D.pow=function(e,t){var n,i,o,s,a,c,f,l,p=this;if((e=new r(e)).c&&!e.isInteger())throw Error(g+"Exponent not an integer: "+S(e));if(null!=t&&(t=new r(t)),a=14<e.e,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return l=new r(Math.pow(+S(p),a?2-u(e):+S(e))),t?l.mod(t):l;if(c=0>e.s,t){if(t.c?!t.c[0]:!t.s)return new r(NaN);(i=!c&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(9<e.e&&(0<p.e||-1>p.e||(0==p.e?1<p.c[0]||a&&24e7<=p.c[1]:8e13>p.c[0]||a&&9999975e7>=p.c[0])))return s=0>p.s&&u(e)?-0:0,-1<p.e&&(s=1/s),new r(c?1/s:s);H&&(s=h(H/m+2))}for(a?(n=new r(.5),c&&(e.s=1),f=u(e)):f=(o=Math.abs(+S(e)))%2,l=new r(L);;){if(f){if(!(l=l.times(p)).c)break;s?l.c.length>s&&(l.c.length=s):i&&(l=l.mod(t))}if(o){if(0===(o=d(o/2)))break;f=o%2}else if(x(e=e.times(n),e.e+1,1),14<e.e)f=u(e);else{if(0==(o=+S(e)))break;f=o%2}p=p.times(p),s?p.c&&p.c.length>s&&(p.c.length=s):i&&(p=p.mod(t))}return i?l:(c&&(l=L.div(l)),t?l.mod(t):s?x(l,H,q,void 0):l)},D.integerValue=function(e){var t=new r(this);return null==e?e=q:a(e,0,8),x(t,t.e+1,e)},D.isEqualTo=D.eq=function(e,t){return 0===s(this,new r(e,t))},D.isFinite=function(){return!!this.c},D.isGreaterThan=D.gt=function(e,t){return 0<s(this,new r(e,t))},D.isGreaterThanOrEqualTo=D.gte=function(e,t){return 1===(t=s(this,new r(e,t)))||0===t},D.isInteger=function(){return!!this.c&&i(this.e/m)>this.c.length-2},D.isLessThan=D.lt=function(e,t){return 0>s(this,new r(e,t))},D.isLessThanOrEqualTo=D.lte=function(e,t){return-1===(t=s(this,new r(e,t)))||0===t},D.isNaN=function(){return!this.s},D.isNegative=function(){return 0>this.s},D.isPositive=function(){return 0<this.s},D.isZero=function(){return!!this.c&&0==this.c[0]},D.minus=function(e,t){var n,o,s,a,u=this,c=u.s;if(t=(e=new r(e,t)).s,!c||!t)return new r(NaN);if(c!=t)return e.s=-t,u.plus(e);var f=u.e/m,l=e.e/m,p=u.c,h=e.c;if(!f||!l){if(!p||!h)return p?(e.s=-t,e):new r(h?u:NaN);if(!p[0]||!h[0])return h[0]?(e.s=-t,e):new r(p[0]?u:3==q?-0:0)}if(f=i(f),l=i(l),p=p.slice(),c=f-l){for((a=0>c)?(c=-c,s=p):(l=f,s=h),s.reverse(),t=c;t--;s.push(0));s.reverse()}else for(o=(a=(c=p.length)<(t=h.length))?c:t,c=t=0;t<o;t++)if(p[t]!=h[t]){a=p[t]<h[t];break}if(a&&(s=p,p=h,h=s,e.s=-e.s),0<(t=(o=h.length)-(n=p.length)))for(;t--;p[n++]=0);for(t=w-1;o>c;){if(p[--o]<h[o]){for(n=o;n&&!p[--n];p[n]=t);--p[n],p[o]+=w}p[o]-=h[o]}for(;0==p[0];p.splice(0,1),--l);return p[0]?E(e,p,l):(e.s=3==q?-1:1,e.c=[e.e=0],e)},D.modulo=D.mod=function(e,t){var n,i,o=this;return e=new r(e,t),!o.c||!e.s||e.c&&!e.c[0]?new r(NaN):!e.c||o.c&&!o.c[0]?new r(o):(9==$?(i=e.s,e.s=1,n=O(o,e,0,3),e.s=i,n.s*=i):n=O(o,e,0,$),(e=o.minus(n.times(e))).c[0]||1!=$||(e.s=o.s),e)},D.multipliedBy=D.times=function(e,t){var n,o,s,a,u,c,f,l,p,h,d,g,y,v,b,A=this,x=A.c,S=(e=new r(e,t)).c;if(!(x&&S&&x[0]&&S[0]))return A.s&&e.s&&(!x||x[0]||S)&&(!S||S[0]||x)?(e.s*=A.s,x&&S?(e.c=[0],e.e=0):e.c=e.e=null):e.c=e.e=e.s=null,e;for(o=i(A.e/m)+i(e.e/m),e.s*=A.s,(f=x.length)<(h=S.length)&&(y=x,x=S,S=y,s=f,f=h,h=s),s=f+h,y=[];s--;y.push(0));for(v=w,b=T,s=h;0<=--s;){for(n=0,d=S[s]%b,g=0|S[s]/b,a=s+(u=f);a>s;)n=(0|(l=d*(l=x[--u]%b)+(c=g*l+(p=0|x[u]/b)*d)%b*b+y[a]+n)/v)+(0|c/b)+g*p,y[a--]=l%v;y[a]=n}return n?++o:y.splice(0,1),E(e,y,o)},D.negated=function(){var e=new r(this);return e.s=-e.s||null,e},D.plus=function(e,t){var n,o=this,s=o.s;if(t=(e=new r(e,t)).s,!s||!t)return new r(NaN);if(s!=t)return e.s=-t,o.minus(e);var a=o.e/m,u=e.e/m,c=o.c,f=e.c;if(!a||!u){if(!c||!f)return new r(s/0);if(!c[0]||!f[0])return f[0]?e:new r(c[0]?o:0*s)}if(a=i(a),u=i(u),c=c.slice(),s=a-u){for(0<s?(u=a,n=f):(s=-s,n=c),n.reverse();s--;n.push(0));n.reverse()}for(0>(s=c.length)-(t=f.length)&&(n=f,f=c,c=n,t=s),s=0;t;)s=0|(c[--t]=c[t]+f[t]+s)/w,c[t]=w===c[t]?0:c[t]%w;return s&&(c=[s].concat(c),++u),E(e,c,u)},D.precision=D.sd=function(e,t){var n,i,o,s=this;if(null!=e&&e!==!!e)return a(e,1,A),null==t?t=q:a(t,0,8),x(new r(s),e,t);if(!(n=s.c))return null;if(i=(o=n.length-1)*m+1,o=n[o]){for(;0==o%10;o/=10,i--);for(o=n[0];10<=o;o/=10,i++);}return e&&s.e+1>i&&(i=s.e+1),i},D.shiftedBy=function(e){return a(e,-v,v),this.times("1e"+e)},D.squareRoot=D.sqrt=function(){var e,t,n,s,a,u=Math.sqrt,c=this,f=c.c,l=c.s,p=c.e,h=I+4,d=new r("0.5");if(1!==l||!f||!f[0])return new r(!l||0>l&&(!f||f[0])?NaN:f?c:1/0);if(0==(l=u(+S(c)))||l==1/0?(0==((t=o(f)).length+p)%2&&(t+="0"),l=u(+t),p=i((p+1)/2)-(0>p||p%2),t=l==1/0?"1e"+p:(t=l.toExponential()).slice(0,t.indexOf("e")+1)+p,n=new r(t)):n=new r(l+""),n.c[0])for(3>(l=(p=n.e)+h)&&(l=0);;)if(a=n,n=d.times(a.plus(O(c,a,h,1))),o(a.c).slice(0,l)===(t=o(n.c)).slice(0,l)){if(n.e<p&&--l,"9999"!=(t=t.slice(l-3,l+1))&&(s||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(x(n,n.e+I+2,1),e=!n.times(n).eq(c));break}if(!s&&(x(a,a.e+I+2,0),a.times(a).eq(c))){n=a;break}h+=4,l+=4,s=1}return x(n,n.e+I+1,q,e)},D.toExponential=function(e,t){return null!=e&&(a(e,0,A),e++),n(this,e,t,1)},D.toFixed=function(e,t){return null!=e&&(a(e,0,A),e=e+this.e+1),n(this,e,t)},D.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=G;else if("object"!=typeof r)throw Error(g+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var o,s=n.split("."),a=+r.groupSize,u=+r.secondaryGroupSize,c=r.groupSeparator||"",f=s[0],l=s[1],p=0>i.s,h=p?f.slice(1):f,d=h.length;if(u&&(o=a,a=u,u=o,d-=o),0<a&&0<d){for(o=d%a||a,f=h.substr(0,o);o<d;o+=a)f+=c+h.substr(o,a);0<u&&(f+=c+h.slice(o)),p&&(f="-"+f)}n=l?f+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?l.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):l):f}return(r.prefix||"")+n+(r.suffix||"")},D.toFraction=function(e){var t,n,i,s,a,u,c,f,l,p,h,d,y=this,w=y.c;if(null!=e&&(!(c=new r(e)).isInteger()&&(c.c||1!==c.s)||c.lt(L)))throw Error(g+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+S(c));if(!w)return new r(y);for(t=new r(L),l=n=new r(L),i=f=new r(L),d=o(w),a=t.e=d.length-y.e-1,t.c[0]=b[0>(u=a%m)?m+u:u],e=!e||0<c.comparedTo(t)?0<a?t:l:c,u=K,K=1/0,c=new r(d),f.c[0]=0;p=O(c,t,0,1),1!=(s=n.plus(p.times(i))).comparedTo(e);)n=i,i=s,l=f.plus(p.times(s=l)),f=s,t=c.minus(p.times(s=t)),c=s;return s=O(e.minus(n),i,0,1),f=f.plus(s.times(l)),n=n.plus(s.times(i)),f.s=l.s=y.s,h=1>O(l,i,a*=2,q).minus(y).abs().comparedTo(O(f,n,a,q).minus(y).abs())?[l,i]:[f,n],K=u,h},D.toNumber=function(){return+S(this)},D.toPrecision=function(e,t){return null!=e&&a(e,1,A),n(this,e,t,2)},D.toString=function(e){var t,n=this,i=n.s,s=n.e;return null===s?i?(t="Infinity",0>i&&(t="-"+t)):t="NaN":(null==e?t=s<=M||s>=k?c(o(n.c),s):f(o(n.c),s,"0"):10===e?t=f(o((n=x(new r(n),I+s+1,q)).c),n.e,"0"):(a(e,2,V.length,"Base"),t=N(f(o(n.c),s,"0"),10,e,i,!0)),0>i&&n.c[0]&&(t="-"+t)),t},D.valueOf=D.toJSON=function(){return S(this)},D._isBigNumber=!0,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(D[Symbol.toStringTag]="BigNumber",D[Symbol.for("nodejs.util.inspect.custom")]=D.valueOf),null!=t&&r.set(t),r}()).default=l.BigNumber=l,void 0===(n=function(){return l}.call(t,r,t,e))||(e.exports=n)}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(16);t.default=class{constructor(e){this.METHOD_GET="GET",this.METHOD_POST="POST",this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){return{host:e.host||"127.0.0.1",protocol:e.protocol||"http",port:e.port||80,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log}}async get(e,t){try{return await this.request().get(e,t)}catch(e){if(e.response&&e.response.status)return e.response;throw e}}async post(e,t,r){try{return await this.request().post(e,t,r)}catch(e){if(e.response&&e.response.status)return e.response;throw e}}request(){let e=n.default.create({baseURL:`${this.config.protocol}://${this.config.host}:${this.config.port}`,timeout:this.config.timeout});return this.config.logging&&(e.interceptors.request.use(e=>(this.config.logger(`Requesting: ${e.baseURL}/${e.url}`),e)),e.interceptors.response.use(e=>(this.config.logger(`Response:   ${e.config.url} - ${e.status}`),e))),e}}},function(e,t,r){e.exports=r(17)},function(e,t,r){"use strict";function n(e){var t=new s(e),r=o(s.prototype.request,t);return i.extend(r,s.prototype,t),i.extend(r,t),r}var i=r(0),o=r(5),s=r(19),a=r(2),u=n(a);u.Axios=s,u.create=function(e){return n(i.merge(a,e))},u.Cancel=r(10),u.CancelToken=r(33),u.isCancel=r(9),u.all=function(e){return Promise.all(e)},u.spread=r(34),e.exports=u,e.exports.default=u},function(e){function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,r){"use strict";function n(e){this.defaults=e,this.interceptors={request:new s,response:new s}}var i=r(2),o=r(0),s=r(28),a=r(29);n.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),(e=o.merge(i,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[a,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},o.forEach(["delete","get","head","options"],function(e){n.prototype[e]=function(t,r){return this.request(o.merge(r||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){n.prototype[e]=function(t,r,n){return this.request(o.merge(n||{},{method:e,url:t,data:r}))}}),e.exports=n},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t){n.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}},function(e,t,r){"use strict";var n=r(8);e.exports=function(e,t,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},function(e){"use strict";e.exports=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e}},function(e,t,r){"use strict";function n(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=r(0);e.exports=function(e,t,r){if(!t)return e;var o;if(r)o=r(t);else if(i.isURLSearchParams(t))o=t.toString();else{var s=[];i.forEach(t,function(e,t){null==e||(i.isArray(e)?t+="[]":e=[e],i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),s.push(n(t)+"="+n(e))}))}),o=s.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},function(e,t,r){"use strict";var n=r(0),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,o,s={};return e?(n.forEach(e.split("\n"),function(e){if(o=e.indexOf(":"),t=n.trim(e.substr(0,o)).toLowerCase(),r=n.trim(e.substr(o+1)),t){if(s[t]&&0<=i.indexOf(t))return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([r]):s[t]?s[t]+", "+r:r}}),s):s}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?function(){function e(e){var t=e;return r&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,r=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(r){var i=n.isString(r)?e(r):r;return i.protocol===t.protocol&&i.host===t.host}}():function(){return!0}},function(e){"use strict";function t(){this.message="String contains an invalid character"}t.prototype=new Error,t.prototype.code=5,t.prototype.name="InvalidCharacterError",e.exports=function(e){for(var r,n,i=e+"",o="",s=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.charAt(0|s)||(a="=",s%1);o+=a.charAt(63&r>>8-s%1*8)){if(255<(n=i.charCodeAt(s+=.75)))throw new t;r=r<<8|n}return o}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(i)&&a.push("path="+i),n.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";function n(){this.handlers=[]}var i=r(0);n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=n},function(e,t,r){"use strict";function n(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var i=r(0),o=r(30),s=r(9),a=r(2),u=r(31),c=r(32);e.exports=function(e){return n(e),e.baseURL&&!u(e.url)&&(e.url=c(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||a.adapter)(e).then(function(t){return n(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return s(t)||(n(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t,r){return n.forEach(r,function(r){e=r(e,t)}),e}},function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";function n(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new i(e),t(r.reason))})}var i=r(10);n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n(function(t){e=t}),cancel:e}},e.exports=n},function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.api=e}getInfo(){return this.api.get("info").then(e=>e.data)}getPeers(){return this.api.get("peers").then(e=>e.data)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(37),i=r(11),o=r(1);t.default=class{constructor(e,t){this.api=e,this.crypto=t}getPrice(e,t){let r=t?`price/${e}/${t}`:`price/${e}`;return this.api.get(r,{transformResponse:[function(e){return e}]}).then(e=>e.data)}get(e){return this.api.get(`tx/${e}`).then(t=>{if(200==t.status&&t.data&&t.data.id==e)return new i.default(t.data);if(202==t.status)throw new n.default("TX_PENDING");if(404==t.status)throw new n.default("TX_NOT_FOUND");if(410==t.status)throw new n.default("TX_FAILED");throw new n.default("TX_INVALID")})}fromRaw(e){return new i.default(e)}async search(e,t){return this.api.post("arql",{op:"equals",expr1:e,expr2:t}).then(e=>e.data?e.data:[])}getStatus(e){return this.api.get(`tx/${e}/status`).then(e=>200==e.status?{status:200,confirmed:e.data}:{status:e.status,confirmed:null})}async sign(e,t){let r=e.getSignatureData(),n=await this.crypto.sign(t,r),i=await this.crypto.hash(n);return e.setSignature({signature:o.bufferTob64Url(n),id:o.bufferTob64Url(i)}),e}async verify(e){const t=e.getSignatureData(),r=e.get("signature",{decode:!0,string:!1}),n=o.bufferTob64Url(await this.crypto.hash(r));if(e.id!==n)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(e.owner,t,r)}post(e){return this.api.post("tx",e).then(e=>e)}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class extends Error{constructor(e,t={}){t.message?super(t.message):super(),this.type=e,this.response=t.response}getType(){return this.type}}},function(e,t){"use strict";function r(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function n(e,t,r){for(var n,o=[],s=t;s<r;s+=3)n=(16711680&e[s]<<16)+(65280&e[s+1]<<8)+(255&e[s+2]),o.push(i[63&(a=n)>>18]+i[63&a>>12]+i[63&a>>6]+i[63&a]);var a;return o.join("")}t.byteLength=function(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){for(var t,n=r(e),i=n[0],a=n[1],u=new s(function(e,t,r){return 3*(t+r)/4-r}(0,i,a)),c=0,f=0<a?i-4:i,l=0;l<f;l+=4)t=o[e.charCodeAt(l)]<<18|o[e.charCodeAt(l+1)]<<12|o[e.charCodeAt(l+2)]<<6|o[e.charCodeAt(l+3)],u[c++]=255&t>>16,u[c++]=255&t>>8,u[c++]=255&t;return 2===a&&(t=o[e.charCodeAt(l)]<<2|o[e.charCodeAt(l+1)]>>4,u[c++]=255&t),1===a&&(t=o[e.charCodeAt(l)]<<10|o[e.charCodeAt(l+1)]<<4|o[e.charCodeAt(l+2)]>>2,u[c++]=255&t>>8,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,s=[],a=0,u=r-o;a<u;a+=16383)s.push(n(e,a,a+16383>u?u:a+16383));return 1==o?(t=e[r-1],s.push(i[t>>2]+i[63&t<<4]+"==")):2==o&&(t=(e[r-2]<<8)+e[r-1],s.push(i[t>>10]+i[63&t>>4]+i[63&t<<2]+"=")),s.join("")};for(var i=[],o=[],s="undefined"==typeof Uint8Array?Array:Uint8Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,c=a.length;u<c;++u)i[u]=a[u],o[a.charCodeAt(u)]=u;o[45]=62,o[95]=63},function(e){var t=function(){return this}();try{t=t||new Function("return this")()}catch(e){"object"==typeof window&&(t=window)}e.exports=t},function(e){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e){e.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1);t.default=class{constructor(e,t){this.api=e,this.crypto=t}getBalance(e){return this.api.get(`wallet/${e}/balance`,{transformResponse:[function(e){return e}]}).then(e=>e.data)}getLastTransactionID(e){return this.api.get(`wallet/${e}/last_tx`).then(e=>e.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(e){return this.ownerToAddress(e.n)}async ownerToAddress(e){return n.bufferTob64Url(await this.crypto.hash(n.b64UrlToBuffer(e)))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1);t.default=class{constructor(e,t,r){this.api=e,this.crypto=t,this.transactions=r}async get(e){if(!e)throw new Error("No Silo URI specified");const t=await this.parseUri(e),r=await this.transactions.search("Silo-Name",t.getAccessKey());if(0==r.length)throw new Error(`No data could be found for the Silo URI: ${e}`);const n=await this.transactions.get(r[0]);if(!n)throw new Error(`No data could be found for the Silo URI: ${e}`);const i=n.get("data",{decode:!0,string:!1});return this.crypto.decrypt(i,t.getEncryptionKey())}async readTransactionData(e,t){if(!t)throw new Error("No Silo URI specified");const r=await this.parseUri(t),n=e.get("data",{decode:!0,string:!1});return this.crypto.decrypt(n,r.getEncryptionKey())}async parseUri(e){const t=e.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!t)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");const r=t[1],o=Math.pow(2,parseInt(t[2])),s=await this.hash(n.stringToBuffer(r),o),a=n.bufferTob64(s.slice(0,15)),u=await this.hash(s.slice(16,31),1);return new i(e,a,u)}async hash(e,t){let r=await this.crypto.hash(e);for(let e=0;e<t-1;e++)r=await this.crypto.hash(r);return r}};class i{constructor(e,t,r){this.uri=e,this.accessKey=t,this.encryptionKey=r}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}}t.SiloResource=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1);t.default=class{constructor(){if(this.keyLength=4096,this.publicExponent=65537,this.hashAlgorithm="sha256",!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=window.crypto.subtle}async generateJWK(){let e=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),t=await this.driver.exportKey("jwk",e.privateKey);return{kty:t.kty,e:t.e,n:t.n,d:t.d,p:t.p,q:t.q,dp:t.dp,dq:t.dq,qi:t.qi}}async sign(e,t){let r=await this.driver.sign({name:"RSA-PSS",saltLength:0},await this.jwkToCryptoKey(e),t);return new Uint8Array(r)}async hash(e){let t=await this.driver.digest("SHA-256",e);return new Uint8Array(t)}async verify(e,t,r){const n=await this.jwkToPublicCryptoKey({kty:"RSA",e:"AQAB",n:e});return this.driver.verify({name:"RSA-PSS",saltLength:0},n,r,t)}async jwkToCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(!window||!window.crypto||!window.crypto.subtle)return!1;let e=window.crypto.subtle;return!("function"!=typeof e.generateKey||"function"!=typeof e.importKey||"function"!=typeof e.exportKey||"function"!=typeof e.digest||"function"!=typeof e.sign)}async encrypt(e,t){const r=await this.driver.importKey("raw","string"==typeof t?n.stringToBuffer(t):t,{name:"PBKDF2",length:32},!1,["deriveKey"]),i=n.stringToBuffer("salt"),o=await this.driver.deriveKey({name:"PBKDF2",salt:i,iterations:1e5,hash:"SHA-256"},r,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),s=new Uint8Array(16);crypto.getRandomValues(s);const a=await this.driver.encrypt({name:"AES-CBC",iv:s},o,e);return n.concatBuffers([s,a])}async decrypt(e,t){const r=await this.driver.importKey("raw","string"==typeof t?n.stringToBuffer(t):t,{name:"PBKDF2",length:32},!1,["deriveKey"]),i=n.stringToBuffer("salt"),o=await this.driver.deriveKey({name:"PBKDF2",salt:i,iterations:1e5,hash:"SHA-256"},r,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),s=e.slice(0,16),a=await this.driver.decrypt({name:"AES-CBC",iv:s},o,e.slice(16));return n.concatBuffers([a])}}}]);</script>
		<link type="text/css"><style>
/*!
 * Milligram v1.3.0
 * https://milligram.github.io
 *
 * Copyright (c) 2017 CJ Patoilo
 * Licensed under the MIT license
 */

*,*:after,*:before{box-sizing:inherit}html{box-sizing:border-box;font-size:62.5%}body{color:#606c76;font-family:'Roboto', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;font-size:1.6em;font-weight:300;letter-spacing:.01em;line-height:1.6}blockquote{border-left:0.3rem solid #d1d1d1;margin-left:0;margin-right:0;padding:1rem 1.5rem}blockquote *:last-child{margin-bottom:0}.button,button,input[type='button'],input[type='reset'],input[type='submit']{background-color:#9b4dca;border:0.1rem solid #9b4dca;border-radius:.4rem;color:#fff;cursor:pointer;display:inline-block;font-size:1.1rem;font-weight:700;height:3.8rem;letter-spacing:.1rem;line-height:3.8rem;padding:0 3.0rem;text-align:center;text-decoration:none;text-transform:uppercase;white-space:nowrap}.button:focus,.button:hover,button:focus,button:hover,input[type='button']:focus,input[type='button']:hover,input[type='reset']:focus,input[type='reset']:hover,input[type='submit']:focus,input[type='submit']:hover{background-color:#606c76;border-color:#606c76;color:#fff;outline:0}.button[disabled],button[disabled],input[type='button'][disabled],input[type='reset'][disabled],input[type='submit'][disabled]{cursor:default;opacity:.5}.button[disabled]:focus,.button[disabled]:hover,button[disabled]:focus,button[disabled]:hover,input[type='button'][disabled]:focus,input[type='button'][disabled]:hover,input[type='reset'][disabled]:focus,input[type='reset'][disabled]:hover,input[type='submit'][disabled]:focus,input[type='submit'][disabled]:hover{background-color:#9b4dca;border-color:#9b4dca}.button.button-outline,button.button-outline,input[type='button'].button-outline,input[type='reset'].button-outline,input[type='submit'].button-outline{background-color:transparent;color:#9b4dca}.button.button-outline:focus,.button.button-outline:hover,button.button-outline:focus,button.button-outline:hover,input[type='button'].button-outline:focus,input[type='button'].button-outline:hover,input[type='reset'].button-outline:focus,input[type='reset'].button-outline:hover,input[type='submit'].button-outline:focus,input[type='submit'].button-outline:hover{background-color:transparent;border-color:#606c76;color:#606c76}.button.button-outline[disabled]:focus,.button.button-outline[disabled]:hover,button.button-outline[disabled]:focus,button.button-outline[disabled]:hover,input[type='button'].button-outline[disabled]:focus,input[type='button'].button-outline[disabled]:hover,input[type='reset'].button-outline[disabled]:focus,input[type='reset'].button-outline[disabled]:hover,input[type='submit'].button-outline[disabled]:focus,input[type='submit'].button-outline[disabled]:hover{border-color:inherit;color:#9b4dca}.button.button-clear,button.button-clear,input[type='button'].button-clear,input[type='reset'].button-clear,input[type='submit'].button-clear{background-color:transparent;border-color:transparent;color:#9b4dca}.button.button-clear:focus,.button.button-clear:hover,button.button-clear:focus,button.button-clear:hover,input[type='button'].button-clear:focus,input[type='button'].button-clear:hover,input[type='reset'].button-clear:focus,input[type='reset'].button-clear:hover,input[type='submit'].button-clear:focus,input[type='submit'].button-clear:hover{background-color:transparent;border-color:transparent;color:#606c76}.button.button-clear[disabled]:focus,.button.button-clear[disabled]:hover,button.button-clear[disabled]:focus,button.button-clear[disabled]:hover,input[type='button'].button-clear[disabled]:focus,input[type='button'].button-clear[disabled]:hover,input[type='reset'].button-clear[disabled]:focus,input[type='reset'].button-clear[disabled]:hover,input[type='submit'].button-clear[disabled]:focus,input[type='submit'].button-clear[disabled]:hover{color:#9b4dca}code{background:#f4f5f6;border-radius:.4rem;font-size:86%;margin:0 .2rem;padding:.2rem .5rem;white-space:nowrap}pre{background:#f4f5f6;border-left:0.3rem solid #9b4dca;overflow-y:hidden}pre>code{border-radius:0;display:block;padding:1rem 1.5rem;white-space:pre}hr{border:0;border-top:0.1rem solid #f4f5f6;margin:3.0rem 0}input[type='email'],input[type='number'],input[type='password'],input[type='search'],input[type='tel'],input[type='text'],input[type='url'],textarea,select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:0.1rem solid #d1d1d1;border-radius:.4rem;box-shadow:none;box-sizing:inherit;height:3.8rem;padding:.6rem 1.0rem;width:100%}input[type='email']:focus,input[type='number']:focus,input[type='password']:focus,input[type='search']:focus,input[type='tel']:focus,input[type='text']:focus,input[type='url']:focus,textarea:focus,select:focus{border-color:#9b4dca;outline:0}select{background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="14" viewBox="0 0 29 14" width="29"><path fill="#d1d1d1" d="M9.37727 3.625l5.08154 6.93523L19.54036 3.625"/></svg>') center right no-repeat;padding-right:3.0rem}select:focus{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="14" viewBox="0 0 29 14" width="29"><path fill="#9b4dca" d="M9.37727 3.625l5.08154 6.93523L19.54036 3.625"/></svg>')}textarea{min-height:6.5rem}label,legend{display:block;font-size:1.6rem;font-weight:700;margin-bottom:.5rem}fieldset{border-width:0;padding:0}input[type='checkbox'],input[type='radio']{display:inline}.label-inline{display:inline-block;font-weight:normal;margin-left:.5rem}.container{margin:0 auto;max-width:112.0rem;padding:0 2.0rem;position:relative;width:100%}.row{display:flex;flex-direction:column;padding:0;width:100%}.row.row-no-padding{padding:0}.row.row-no-padding>.column{padding:0}.row.row-wrap{flex-wrap:wrap}.row.row-top{align-items:flex-start}.row.row-bottom{align-items:flex-end}.row.row-center{align-items:center}.row.row-stretch{align-items:stretch}.row.row-baseline{align-items:baseline}.row .column{display:block;flex:1 1 auto;margin-left:0;max-width:100%;width:100%}.row .column.column-offset-10{margin-left:10%}.row .column.column-offset-20{margin-left:20%}.row .column.column-offset-25{margin-left:25%}.row .column.column-offset-33,.row .column.column-offset-34{margin-left:33.3333%}.row .column.column-offset-50{margin-left:50%}.row .column.column-offset-66,.row .column.column-offset-67{margin-left:66.6666%}.row .column.column-offset-75{margin-left:75%}.row .column.column-offset-80{margin-left:80%}.row .column.column-offset-90{margin-left:90%}.row .column.column-10{flex:0 0 10%;max-width:10%}.row .column.column-20{flex:0 0 20%;max-width:20%}.row .column.column-25{flex:0 0 25%;max-width:25%}.row .column.column-33,.row .column.column-34{flex:0 0 33.3333%;max-width:33.3333%}.row .column.column-40{flex:0 0 40%;max-width:40%}.row .column.column-50{flex:0 0 50%;max-width:50%}.row .column.column-60{flex:0 0 60%;max-width:60%}.row .column.column-66,.row .column.column-67{flex:0 0 66.6666%;max-width:66.6666%}.row .column.column-75{flex:0 0 75%;max-width:75%}.row .column.column-80{flex:0 0 80%;max-width:80%}.row .column.column-90{flex:0 0 90%;max-width:90%}.row .column .column-top{align-self:flex-start}.row .column .column-bottom{align-self:flex-end}.row .column .column-center{-ms-grid-row-align:center;align-self:center}@media (min-width: 40rem){.row{flex-direction:row;margin-left:-1.0rem;width:calc(100% + 2.0rem)}.row .column{margin-bottom:inherit;padding:0 1.0rem}}a{color:#9b4dca;text-decoration:none}a:focus,a:hover{color:#606c76}dl,ol,ul{list-style:none;margin-top:0;padding-left:0}dl dl,dl ol,dl ul,ol dl,ol ol,ol ul,ul dl,ul ol,ul ul{font-size:90%;margin:1.5rem 0 1.5rem 3.0rem}ol{list-style:decimal inside}ul{list-style:circle inside}.button,button,dd,dt,li{margin-bottom:1.0rem}fieldset,input,select,textarea{margin-bottom:1.5rem}blockquote,dl,figure,form,ol,p,pre,table,ul{margin-bottom:2.5rem}table{border-spacing:0;width:100%}td,th{border-bottom:0.1rem solid #e1e1e1;padding:1.2rem 1.5rem;text-align:left}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}b,strong{font-weight:bold}p{margin-top:0}h1,h2,h3,h4,h5,h6{font-weight:300;letter-spacing:-.1rem;margin-bottom:2.0rem;margin-top:0}h1{font-size:4.6rem;line-height:1.2}h2{font-size:3.6rem;line-height:1.25}h3{font-size:2.8rem;line-height:1.3}h4{font-size:2.2rem;letter-spacing:-.08rem;line-height:1.35}h5{font-size:1.8rem;letter-spacing:-.05rem;line-height:1.5}h6{font-size:1.6rem;letter-spacing:0;line-height:1.4}img{max-width:100%}.clearfix:after{clear:both;content:' ';display:table}.float-left{float:left}.float-right{float:right}

/*# sourceMappingURL=milligram.min.css.map */
</style>

		<script>async function encrypt_mail(e,a,t){var r=new TextEncoder,n=JSON.stringify({subject:a,body:e}),c=r.encode(n),i=await generate_random_bytes(256),y=await arweave.crypto.encrypt(c,i),o=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},t,i);return arweave.utils.concatBuffers([o,y])}async function decrypt_mail(e,a){var t=new Uint8Array(e.slice(0,512)),r=new Uint8Array(e.slice(512)),n=await window.crypto.subtle.decrypt({name:"RSA-OAEP"},a,t);return arweave.crypto.decrypt(r,n)}async function wallet_to_key(e){var a=Object.create(e);a.alg="RSA-OAEP-256",a.ext=!0;return await crypto.subtle.importKey("jwk",a,{name:"RSA-OAEP",hash:{name:"SHA-256"}},!1,["decrypt"])}async function get_public_key(e){var a=await arweave.wallets.getLastTransactionID(e);if(""!=a){var t=await arweave.transactions.get(a);if(null!=t){arweave.utils.b64UrlToBuffer(t.owner);var r={kty:"RSA",e:"AQAB",n:t.owner,alg:"RSA-OAEP-256",ext:!0};return await crypto.subtle.importKey("jwk",r,{name:"RSA-OAEP",hash:{name:"SHA-256"}},!1,["encrypt"])}}}async function generate_random_bytes(e){var a=new Uint8Array(e);return window.crypto.getRandomValues(a),a}</script>
		<script>function login(e){var a=new FileReader;a.onload=function(e){try{wallet=JSON.parse(e.target.result);var a=new URLSearchParams(window.location.search);if(a.has("to"))document.getElementById("compose_address").value=a.get("to"),compose_mail();else refresh_inbox(wallet),switch_to_page("inbox_page");setInterval(function(){refresh_inbox(wallet)},3e4)}catch(e){alert("Error logging in: "+e)}},a.readAsText(e[0])}</script>
		<script>function refresh_inbox(e){(async()=>{var a=await arweave.wallets.jwkToAddress(e);let t={op:"and",expr1:{op:"equals",expr1:"to",expr2:a},expr2:{op:"equals",expr1:"App-Name",expr2:"permamail"}};const r=await this.arweave.api.post("arql",t);var n=[];n=""==r.data?[]:await Promise.all(r.data.map(async function(e,a){let t={};var r=await this.arweave.transactions.get(e);t.unixTime="0",r.get("tags").forEach(e=>{let a=e.get("name",{decode:!0,string:!0}),r=e.get("value",{decode:!0,string:!0});"Unix-Time"===a&&(t.unixTime=r)}),t.id=e,t.tx_status=await this.arweave.transactions.getStatus(e);var n=await arweave.wallets.ownerToAddress(r.owner);return t.from=await get_name(n),t.td_fee=arweave.ar.winstonToAr(r.reward),t.td_qty=arweave.ar.winstonToAr(r.quantity),t})),mail_address.innerHTML=await get_name(a);for(var i=document.getElementById("inbox_pane");i.firstChild;)i.removeChild(i.firstChild);n.sort((e,a)=>Number(a.unixTime)-Number(e.unixTime)),i.innerHTML="",n.forEach(function(e){var a=document.createElement("tr"),t=document.createElement("td"),r=document.createElement("td"),n=document.createElement("td"),d=document.createElement("td"),o=document.createElement("a");a.appendChild(r),a.appendChild(t),a.appendChild(n),a.appendChild(d),t.appendChild(o);e.tx_status;r.innerHTML=e.from,n.innerHTML=e.td_fee,d.innerHTML=e.td_qty,o.innerHTML=e.id,o.onclick=function(){show_mail(e.id)},i.appendChild(a)})})()}async function get_name(e){let a={op:"and",expr1:{op:"equals",expr1:"App-Name",expr2:"arweave-id"},expr2:{op:"and",expr1:{op:"equals",expr1:"from",expr2:e},expr2:{op:"equals",expr1:"Type",expr2:"name"}}};const t=await this.arweave.api.post("arql",a);return 0==t.data.length?e:(await this.arweave.transactions.get(t.data[0])).get("data",{decode:!0,string:!0})}</script>
		<script>function show_mail(e){(async()=>{switch_to_page("view_page");document.getElementById("view_title");var t=document.getElementById("view_contents"),n=document.getElementById("view_subject"),a=document.getElementById("reply"),r=document.getElementById("previousSender"),o=document.getElementById("previousMsg"),i=document.getElementById("previousDateMsg"),c=document.getElementById("previousDateTag"),l=document.getElementById("previousSubject"),s=document.getElementById("previous_page"),d="0",u=await arweave.transactions.get(e);u.get("tags").forEach(e=>{let t=e.get("name",{decode:!0,string:!0}),n=e.get("value",{decode:!0,string:!0});"Unix-Time"===t&&(d=n)});var g=await wallet_to_key(wallet);a.onclick=async function(){var t,n,a,g,v,p,w,M=document.getElementById("compose_address");M.value=await arweave.wallets.ownerToAddress(u.owner),i.innerHTML=(t=new Date(1e3*d),n=t.getFullYear(),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],g=t.getDate(),v=t.getHours(),p=t.getMinutes(),w=t.getSeconds(),g+" "+a+" "+n+" "+v+":"+p+":"+w),r.innerHTML=M.value,o.innerHTML=y,l.innerHTML=e,m&&(o.innerHTML=m.body,l.innerHTML=m.subject),c.style.display="0"===d?"none":"block",switch_to_page("compose_page"),s.style.display="block"};var m,y=arweave.utils.bufferToString(await decrypt_mail(arweave.utils.b64UrlToBuffer(u.data),g));y=y.replace(/(?:\r\n|\r|\n)/g,"<br>");try{m=JSON.parse(y)}catch(e){}t.innerHTML=y,n.innerHTML=e,m&&(t.innerHTML=m.body,n.innerHTML=m.subject)})()}</script>
		<script>function compose_mail(){switch_to_page("compose_page")}function send_mail(){(async()=>{var e=document.getElementById("compose_address").value,a=document.getElementById("compose_subject").value,t=document.getElementById("compose_content").value,n=document.getElementById("compose_tokens").value,o=Math.round((new Date).getTime()/1e3);""==n&&(n="0"),n=arweave.ar.arToWinston(n);var i=await get_public_key(e);if(null!=i){t=await encrypt_mail(t,a,i),console.log(t);var s=await arweave.createTransaction({target:e,data:arweave.utils.concatBuffers([t]),quantity:n},wallet);s.addTag("App-Name","permamail"),s.addTag("App-Version","0.0.2"),s.addTag("Unix-Time",o),await arweave.transactions.sign(s,wallet),console.log(s.id),await arweave.transactions.post(s),alert("Mail dispatched!"),switch_to_page("inbox_page")}else alert("Recipient has to send a transaction to the network, first!")})()}</script>
		<script>
			var arweave = Arweave.init({host: 'arweave.net', port: 443, protocol: 'https'});
			var wallet = {};
			var content = "";

			function switch_to_page(page) {
				let pages =
					[
						"home_page",
						"inbox_page",
						"view_page",
						"compose_page",
						"previous_page"
					];

				pages.forEach(function(p) {
					var elem = document.getElementById(p);
					elem.style.display = 'none';
				});

				var elem = document.getElementById(page);
				elem.style.display = 'block';
			}
		</script>

		<style>
			header .container {
				margin-top: 10em;
				text-align: center;
				max-width: 100rem;
				width: 50%;
			}

			.file-input{
				height: 200px;
				border: 2px dashed #62666f;
				text-align: center;
				display: flex;
				align-items: center;
				justify-content: center;
				position: relative;
				margin: auto;
				max-width: 300px;
			}

			.file-input input[type=file]{
				opacity: 0;
				position: absolute;
				background: none;
				width: 100%;
				height: 100%;
			}

			#view_contents {
				margin-left: 1em;
				margin-bottom: 1em;
				word-wrap: break-word;
				max-width: 50em;
			}
		</style>
	</head>
	<body>
		<div id="home_page" class="">
			<header>
				<div class="container">
					<h1 class="">Weavemail</h1>
					<div class="file-input">
						<input type="file" id="file" onchange="login(this.files)" >
						<div id="desc">Drop a keyfile to login.</div>
					</div>
					<div class="">
						<p>
							<br>
							Weavemail is mail that <b>Google cannot read</b>.<br>
							Mail that <b>cannot be censored</b>.<br>
							Mail that <b>cannot be lost</b>.<br>
							<span style="display: inline-block; margin-top: 0.5em; margin-bottom: 0.75em;">Weavemail is mail that <b>you own</b>.</span><br>
						</p>
						<button
							class="button button-outline"
							onclick=" window.open('https://tokens.arweave.org','_blank')">
							Get a wallet with some tokens.
						</button>
					</div>
				</div>
			</header>
		</div>
		<div id="inbox_page" style="display: none;">
			<h1 id="mail_address" style="display: inline-block; margin-right: 0.5em;">...</h1>
			<button onclick="compose_mail()">Compose</button>
			<table>
				<thead>
					<tr>
						<td>Sender</td>
						<td>ID</td>
						<td>Fee</td>
						<td>AR</td>
					</tr>
				</thead>
				<tbody id="inbox_pane">

				</tbody>
			</table>
		</div>
		<div id="view_page" style="display: none;">
			<fieldset>
			<h1 id="view_title">View mail</h1>
			<label for="view_subject">Mail subject</label>
			<p id="view_subject">View mail</p>
			<label for="view_contents">Mail contents</label>
			<div id="view_contents">...</div>
			<button id="reply">Reply</button>
			<button onclick="switch_to_page('inbox_page')">Back to inbox</button>
	  	</fieldset>
		</div>
		<div id="compose_page" style="display: none;">
			<fieldset>
				<h1>Write a new permamail</h1>
				<label for="compose_address">Mail recipient</label>
				<input type="text" placeholder="Arweave address" id="compose_address">
				<label for="compose_subject">Mail subject</label>
				<input type="text" placeholder="Subject" id="compose_subject">
				<label for="compose_content">Mail contents</label>
				<textarea id="compose_content"></textarea>
				<label for="compose_address">AR tokens to send</label>
				<input type="text" placeholder="0 AR" id="compose_tokens"><br>
				<button onclick="send_mail()">Send</button>
				<button onclick="switch_to_page('inbox_page')">Discard message</button>
			</fieldset>
			<fieldset id="previous_page" style="display: none;">
				<h1>Previous Message</h1>
				<div><span><strong>From: </strong></span><span id="previousSender"></span></div>
				<div id="previousDateTag"><span><strong>Date: </strong></span><span id="previousDateMsg"></span></div>
				<label for="previousSubject">Mail subject</label>
				<p id="previousSubject">View mail</p>
				<label for="previousMsg">Mail contents</label>
				<p id="previousMsg"></p>
			</fieldset>
		</div>
	</body>
</html>
